{% extends '@Front/layout.html.twig' %}

{% block page_title %}
    {{ post.title }} {{ 'by'|trans }} {{ post.author.fullName }}
{% endblock %}

{% block body %}
    {% set challengeSubject = post.challengeSubject %}
    {% set challenge = challengeSubject.challenge %}
    {% set challengeNumber = challenge_subject_provider.getSequenceNumber(challengeSubject) %}
    {% set subjectName = ('challenge_frequency_type.element.'~challenge.frequency)|trans ~ ' #' ~ challengeNumber ~ ' - ' ~ challengeSubject.name %}

    <div class="main">
        <div class="page-title">
            <h2>{{ post.title }}</h2>
        </div>
        <div class="post row">
            <div class="post-photo col-md-9 col-lg-10">
                <img class="img-centered" title="{{ post.author.fullName }} {{ 'for'|trans }} {{ subjectName }}"
                     src="{{ post.coverPicture.url(storage_bucket_name) }}"/>
            </div>
            <div class="post-sidebar col-md-3 col-lg-2">
                <div class="post-sidebar-inner">
                    <a href="{{ path('front_user_profile', {'userId': post.author.publicId, 'fullName': post.author.fullName|lower|replace({' ':''})}) }}">
                        {% if post.author.profilePicture is not null %}
                            <img class="avatar mt-1" src="{{ post.author.profilePicture.url(storage_bucket_name) }}"
                                 alt="{{ post.author.firstName }}"/>
                        {% else %}
                            <img class="avatar mt-1" src="{{ asset('bundles/front/img/user-unknow.png') }}"
                                 alt="{{ post.author.firstName }}"/>
                        {% endif %}
                        <p>{{ post.author.fullName }}</p>
                    </a>
                    <div class="sidebar-sections">
                        <div class="row sidebar-section">
                            <div class="col-xs-12">
                            <span class="action-like">
                                <a href="#">
                                    <i class="fa fa-heart hvr-icon-pulse"></i>
                                </a>
                                    0
                            </span>
                            </div>
                        </div>
                        <div class="row sidebar-section">
                            <div class="col-xs-12">
                                <i class="icon-photo-camera"></i>
                                <p class="small">NIKON D70s<br/>35mm | 1/3s | ISO 100</p>
                            </div>
                        </div>
                        <div class="row sidebar-section">
                            <div class="col-xs-12">
                                <table style="width: 100%">
                                    <tbody class="small">
                                    <tr>
                                        <td style="text-align: left;"><b>Prise le</b></td>
                                        <td style="text-align: right;">{{ post.createdAt|localizeddate('long', 'none') }}</td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: left;"><b>Post√© le</b></td>
                                        <td style="text-align: right;">{{ post.createdAt|localizeddate('long', 'none') }}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}